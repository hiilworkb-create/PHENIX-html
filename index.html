<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>Phenix Bot</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f7f7f7;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      margin: 0;
    }

    .container {
      background: #fff;
      padding: 25px;
      border-radius: 15px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      width: 100%;
      max-width: 420px;
      text-align: center;
    }

    .logo {
      font-size: 40px;
      margin-bottom: 10px;
    }

    h2 {
      margin-bottom: 20px;
      font-size: 22px;
      color: #222;
    }

    .form-group {
      margin-bottom: 15px;
      text-align: left;
    }

    .form-input, select {
      width: 100%;
      height: 45px;
      padding: 10px;
      font-size: 16px;
      border: 2px solid #ccc;
      border-radius: 10px;
      box-sizing: border-box;
      transition: all 0.3s ease;
    }

    .form-input:focus, select:focus {
      border-color: #007bff;
      box-shadow: 0 0 6px rgba(0,123,255,0.3);
    }

    .valid {
      border-color: #28a745 !important;
      box-shadow: 0 0 6px rgba(40,167,69,0.5) !important;
    }

    .invalid {
      border-color: #dc3545 !important;
      box-shadow: 0 0 6px rgba(220,53,69,0.5) !important;
    }

    .example {
      font-size: 13px;
      color: #666;
      margin-top: 5px;
    }

    .actions {
      margin-top: 20px;
    }

    .btn {
      width: 100%;
      height: 45px;
      border: none;
      border-radius: 10px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: background 0.3s ease;
    }

    .btn-primary {
      background: #007bff;
      color: #fff;
    }

    .btn-primary:disabled {
      background: #b0c4de;
      cursor: not-allowed;
    }

    .checkbox {
      margin: 15px 0;
      text-align: left;
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="logo">ü¶Ö</div>
    <h2>Phenix Bot</h2>

    <form id="dataForm">
      <div class="form-group">
        <input type="text" class="form-input" id="fio" placeholder="–§–ò–û" required>
        <div class="example">–ü—Ä–∏–º–µ—Ä: –ò–≤–∞–Ω–æ–≤ –ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤–∏—á</div>
      </div>

      <div class="form-group">
        <input type="text" class="form-input" id="phone" placeholder="–¢–µ–ª–µ—Ñ–æ–Ω" required>
        <div class="example">–ü—Ä–∏–º–µ—Ä: +7 (999) 123-45-67</div>
      </div>

      <div class="form-group">
        <select id="docType" class="form-input" required>
          <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç</option>
          <option value="passport">üìò –ü–∞—Å–ø–æ—Ä—Ç</option>
          <option value="snils">üßæ –°–ù–ò–õ–°</option>
          <option value="inn">üí≥ –ò–ù–ù</option>
        </select>
      </div>

      <div class="form-group" id="docField" style="display:none;">
        <input type="text" class="form-input" id="document" placeholder="">
        <div class="example" id="docExample"></div>
      </div>

      <div class="checkbox">
        <label><input type="checkbox" id="notRobot"> –Ø –Ω–µ —Ä–æ–±–æ—Ç</label>
      </div>

      <div class="actions">
        <button type="submit" id="nextBtn" class="btn btn-primary" disabled>‚û° –î–∞–ª–µ–µ</button>
      </div>
    </form>
  </div>

  <script>
    const fioField = document.getElementById("fio");
    const phoneField = document.getElementById("phone");
    const docType = document.getElementById("docType");
    const docField = document.getElementById("docField");
    const documentInput = document.getElementById("document");
    const docExample = document.getElementById("docExample");
    const notRobot = document.getElementById("notRobot");
    const nextBtn = document.getElementById("nextBtn");

    let selectedDoc = "";

    function setValidationStyle(field, isValid) {
      field.classList.remove("valid", "invalid");
      if (isValid) field.classList.add("valid");
      else if (field.value.trim() !== "") field.classList.add("invalid");
    }

    function validateForm() {
      let valid = true;

      // –§–ò–û: —Ç–æ–ª—å–∫–æ –±—É–∫–≤—ã
      const fio = fioField.value.trim();
      if (!/^[–ê-–Ø–∞-—è–Å—ë\s]+$/.test(fio)) {
        setValidationStyle(fioField, false);
        valid = false;
      } else {
        setValidationStyle(fioField, true);
      }

      // –¢–µ–ª–µ—Ñ–æ–Ω: +7 (XXX) XXX-XX-XX
      const phone = phoneField.value.trim();
      if (!/^\+7\s?\(\d{3}\)\s?\d{3}-\d{2}-\d{2}$/.test(phone)) {
        setValidationStyle(phoneField, false);
        valid = false;
      } else {
        setValidationStyle(phoneField, true);
      }

      // –î–æ–∫—É–º–µ–Ω—Ç
      if (selectedDoc) {
        const docVal = documentInput.value.trim();
        let regex;
        if (selectedDoc === "passport") regex = /^\d{4}\s\d{6}$/;
        if (selectedDoc === "snils") regex = /^\d{3}-\d{3}-\d{3}\s\d{2}$/;
        if (selectedDoc === "inn") regex = /^\d{12}$/;

        if (!regex.test(docVal)) {
          setValidationStyle(documentInput, false);
          valid = false;
        } else {
          setValidationStyle(documentInput, true);
        }
      } else valid = false;

      // –ß–µ–∫–±–æ–∫—Å "—è –Ω–µ —Ä–æ–±–æ—Ç"
      if (!notRobot.checked) valid = false;

      nextBtn.disabled = !valid;
    }

    // –ú–∞—Å–∫–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–∞
    phoneField.addEventListener("input", e => {
      let v = e.target.value.replace(/\D/g, "");
      if (v.startsWith("7")) v = v.substring(1);
      if (v.length > 10) v = v.substring(0,10);
      let formatted = "+7";
      if (v.length > 0) formatted += " (" + v.substring(0,3);
      if (v.length >= 3) formatted += ") " + v.substring(3,6);
      if (v.length >= 6) formatted += "-" + v.substring(6,8);
      if (v.length >= 8) formatted += "-" + v.substring(8,10);
      e.target.value = formatted;
      validateForm();
    });

    // –í—ã–±–æ—Ä –¥–æ–∫—É–º–µ–Ω—Ç–∞
    docType.addEventListener("change", () => {
      selectedDoc = docType.value;
      docField.style.display = selectedDoc ? "block" : "none";
      documentInput.value = "";
      documentInput.classList.remove("valid","invalid");

      if (selectedDoc === "passport") {
        documentInput.placeholder = "–ü–∞—Å–ø–æ—Ä—Ç";
        docExample.innerText = "–ü—Ä–∏–º–µ—Ä: 1234 567890";
      }
      if (selectedDoc === "snils") {
        documentInput.placeholder = "–°–ù–ò–õ–°";
        docExample.innerText = "–ü—Ä–∏–º–µ—Ä: 112-233-445 95";
      }
      if (selectedDoc === "inn") {
        documentInput.placeholder = "–ò–ù–ù";
        docExample.innerText = "–ü—Ä–∏–º–µ—Ä: 123456789012";
      }

      validateForm();
    });

    fioField.addEventListener("input", validateForm);
    documentInput.addEventListener("input", validateForm);
    notRobot.addEventListener("change", validateForm);

    document.getElementById("dataForm").addEventListener("submit", e => {
      e.preventDefault();
      if (!nextBtn.disabled) alert("‚úÖ –î–∞–Ω–Ω—ã–µ —É—Å–ø–µ—à–Ω–æ –≤–≤–µ–¥–µ–Ω—ã!");
    });
  </script>
</body>
</html>
