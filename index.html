<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Casino Mini App</title>

<script src="https://telegram.org/js/telegram-web-app.js"></script>

<style>
*{box-sizing:border-box;font-family:Segoe UI}
body{
margin:0;
background:linear-gradient(180deg,#0b0f2b,#1a1f4d);
color:#fff
}
.container{max-width:430px;margin:auto;padding:15px}
.card{
background:rgba(255,255,255,.08);
border-radius:16px;
padding:15px;
margin-bottom:12px
}
h1,h2{text-align:center;margin:10px 0}
button{
width:100%;
padding:12px;
border:none;
border-radius:12px;
font-weight:bold;
background:linear-gradient(45deg,#ffb347,#ffcc33);
margin-top:8px;
cursor:pointer
}
.menu button{margin-bottom:8px}
.hidden{display:none}
.balance{text-align:center;font-size:18px}
.slot{font-size:42px;text-align:center}
.badge{
display:inline-block;
background:#222;
padding:4px 10px;
border-radius:10px;
margin:2px;
font-size:12px
}
.progress{
background:#111;border-radius:10px;overflow:hidden;height:8px
}
.progress div{height:8px;background:gold}
</style>
</head>

<body>
<div class="container">

<!-- AUTH -->
<div id="auth" class="card">
<h1>ğŸ° CASINO</h1>
<input id="username" placeholder="Ğ’Ğ²ĞµĞ´Ğ¸Ñ‚Ğµ Ğ½Ğ¸Ğº"
style="width:100%;padding:10px;border-radius:10px;border:none">
<button onclick="login()">Ğ’Ğ¾Ğ¹Ñ‚Ğ¸ / Ğ ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ°Ñ†Ğ¸Ñ</button>
</div>

<!-- PROFILE -->
<div id="profile" class="hidden">

<div class="card">
<h2>ğŸ‘¤ Ğ›Ğ¸Ñ‡Ğ½Ñ‹Ğ¹ ĞºĞ°Ğ±Ğ¸Ğ½ĞµÑ‚</h2>
<div class="balance">Ğ‘Ğ°Ğ»Ğ°Ğ½Ñ: <b id="balance"></b> ğŸ’°</div>
<div>Ğ£Ñ€Ğ¾Ğ²ĞµĞ½ÑŒ: <b id="level"></b> | VIP: <b id="vip"></b></div>
<div class="progress"><div id="xpbar"></div></div>
<div id="nfts"></div>
<button onclick="logout()">Ğ’Ñ‹Ğ¹Ñ‚Ğ¸</button>
</div>

<div class="card menu">
<button onclick="openGame('slots')">ğŸ° Ğ¡Ğ»Ğ¾Ñ‚Ñ‹</button>
<button onclick="openGame('roulette')">ğŸ¡ Ğ ÑƒĞ»ĞµÑ‚ĞºĞ°</button>
<button onclick="openGame('dice')">ğŸ² Dice</button>
<button onclick="openGame('jetx')">ğŸš€ JetX</button>
<button onclick="topup()">â• ĞŸĞ¾Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ÑŒ</button>
</div>
</div>

<!-- SLOTS -->
<div id="slots" class="card hidden">
<h2>ğŸ° Ğ¡Ğ»Ğ¾Ñ‚Ñ‹</h2>
<div id="slotResult" class="slot">ğŸ’ ğŸ’ ğŸ’</div>
<button onclick="playSlots()">ĞšÑ€ÑƒÑ‚Ğ¸Ñ‚ÑŒ (100)</button>
<button onclick="back()">â¬… ĞĞ°Ğ·Ğ°Ğ´</button>
</div>

<!-- ROULETTE -->
<div id="roulette" class="card hidden">
<h2>ğŸ¡ Ğ ÑƒĞ»ĞµÑ‚ĞºĞ°</h2>
<button onclick="playRoulette()">Ğ¡Ñ‚Ğ°Ğ²ĞºĞ° (100)</button>
<button onclick="back()">â¬… ĞĞ°Ğ·Ğ°Ğ´</button>
</div>

<!-- DICE -->
<div id="dice" class="card hidden">
<h2>ğŸ² Dice</h2>
<button onclick="playDice()">Ğ‘Ñ€Ğ¾ÑĞ¸Ñ‚ÑŒ (100)</button>
<button onclick="back()">â¬… ĞĞ°Ğ·Ğ°Ğ´</button>
</div>

<!-- JETX -->
<div id="jetx" class="card hidden">
<h2>ğŸš€ JetX</h2>
<div id="multiplier" style="font-size:32px;text-align:center">1.00x</div>
<button onclick="startJetX()">Ğ¡Ğ¢ĞĞ Ğ¢ (100)</button>
<button onclick="cashOut()">Ğ—ĞĞ‘Ğ ĞĞ¢Ğ¬</button>
<button onclick="back()">â¬… ĞĞ°Ğ·Ğ°Ğ´</button>
</div>

</div>

<script>
const tg = window.Telegram.WebApp;
tg.expand();

let user = JSON.parse(localStorage.getItem("user"));
let jetxTimer = null;
let jetxValue = 1;

if(user) showProfile();

function login(){
const name=document.getElementById("username").value;
if(!name) return alert("Ğ’Ğ²ĞµĞ´Ğ¸Ñ‚Ğµ Ğ½Ğ¸Ğº");
user={
name,
balance:1000,
level:1,
xp:0,
vip:0,
nfts:[]
};
save();
showProfile();
}

function showProfile(){
auth.classList.add("hidden");
profile.classList.remove("hidden");
render();
}

function logout(){
localStorage.clear();
location.reload();
}

function save(){
localStorage.setItem("user",JSON.stringify(user));
}

function render(){
balance.innerText=user.balance;
level.innerText=user.level;
vip.innerText=user.vip;
xpbar.style.width=(user.xp)+"%";
nfts.innerHTML="";
user.nfts.forEach(n=>nfts.innerHTML+=`<span class="badge">${n}</span>`);
save();
}

function openGame(id){
profile.classList.add("hidden");
document.getElementById(id).classList.remove("hidden");
}

function back(){
document.querySelectorAll(".card").forEach(c=>c.classList.add("hidden"));
profile.classList.remove("hidden");
}

function win(amount){
user.balance+=amount;
user.xp+=10;
if(user.xp>=100){
user.level++;user.xp=0;
}
user.vip=Math.floor(user.balance/5000);
if(user.level>=5&&!user.nfts.includes("Bronze NFT"))user.nfts.push("Bronze NFT");
if(user.level>=10&&!user.nfts.includes("Gold NFT"))user.nfts.push("Gold NFT");
render();
}

function lose(amount){
user.balance-=amount;
render();
}

function playSlots(){
if(user.balance<100)return alert("ĞœĞ°Ğ»Ğ¾ ÑÑ€ĞµĞ´ÑÑ‚Ğ²");
const s=["ğŸ’","ğŸ‹","â­","7ï¸âƒ£"];
const a=s[Math.floor(Math.random()*4)];
const b=s[Math.floor(Math.random()*4)];
const c=s[Math.floor(Math.random()*4)];
slotResult.innerText=`${a} ${b} ${c}`;
if(a===b&&b===c) win(300); else lose(100);
}

function playRoulette(){
if(user.balance<100)return alert("ĞœĞ°Ğ»Ğ¾ ÑÑ€ĞµĞ´ÑÑ‚Ğ²");
Math.random()>0.5?win(200):lose(100);
}

function playDice(){
if(user.balance<100)return alert("ĞœĞ°Ğ»Ğ¾ ÑÑ€ĞµĞ´ÑÑ‚Ğ²");
Math.random()>0.6?win(250):lose(100);
}

function startJetX(){
if(user.balance<100)return alert("ĞœĞ°Ğ»Ğ¾ ÑÑ€ĞµĞ´ÑÑ‚Ğ²");
lose(100);
jetxValue=1;
multiplier.innerText="1.00x";
jetxTimer=setInterval(()=>{
jetxValue+=Math.random()*0.15;
multiplier.innerText=jetxValue.toFixed(2)+"x";
if(Math.random()>0.97) crash();
},150);
}

function cashOut(){
if(!jetxTimer)return;
clearInterval(jetxTimer);
win(Math.floor(jetxValue*100));
jetxTimer=null;
}

function crash(){
clearInterval(jetxTimer);
alert("ğŸ’¥ CRASH!");
jetxTimer=null;
}

function topup(){
user.balance+=500;
render();
}
</script>

</body>
</html>
